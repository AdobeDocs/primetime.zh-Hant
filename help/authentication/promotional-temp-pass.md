---
title: 促銷臨時通行證
description: 促銷臨時通行證
exl-id: 705c1ba9-0430-4e3b-add1-d9e4da3f82d1
source-git-commit: bfc3ba55c99daba561255760baf273b6538a3c6e
workflow-type: tm+mt
source-wordcount: '1523'
ht-degree: 0%

---

# 促銷臨時通行證 {#promotional-temp-pass}

>[!NOTE]
>
>此頁面上的內容僅供參考。 使用此API需要來自Adobe的當前許可證。 不允許未經授權使用。

## 功能摘要 {#feature-summary}

促銷臨時通行證允許程式設計師為沒有MVPD帳戶憑據的用戶提供對其受保護內容的臨時訪問。

促銷臨時通行證設計為用於運行促銷活動，用戶在向程式設計師提供有效的標識資訊（例如，電子郵件地址）後，將能夠使用 **預定時間段內不同視頻點播標題的預定數目**。

>[!IMPORTANT]
>
>Adobe不儲存任何個人身份資訊(PII)。 因此，程式設計師必須在唯一用戶提供的黃金時間驗證API上設定哈希。

促銷臨時通行證構建在 [臨時通過](/help/authentication/temp-pass.md) 功能，即包含所有臨時傳遞功能。

一旦超過最大預定數目的VOD標題或預定時間段，該用戶將不能訪問同一設備上的內容或通過使用相同的用戶標識符資訊（例如，電子郵件地址），直到授權令牌從Adobe Primetime認證伺服器中被清除。

>[!NOTE]
>
>臨時傳遞是高級工作流包的一部分。 如果有興趣使用此功能，請與您的黃金時段銷售代表聯繫。

## 臨時通行證和促銷臨時通行證比較 {#tp-ptp-comparison}

| 臨時通過 | 促銷臨時通行證 |
|----------------------------------|----------------------------------------------------------------------------------------|
| 訪問內容 <ul><li>基於時間</li></ul> | 訪問內容 <ul><li>基於時間</li><li>根據資源數</li></ul> |
| 基於的訪問安全性 <ul><li>設備ID</li></ul> | 基於 <ul><li>設備ID</li><li>與提供的用戶標識符資訊（例如，電子郵件）的哈希值</li></ul> |
| 客戶端錯誤API可用 | 客戶端錯誤API可用 |
| 重置/清除可用 | 重置/清除可用 |

## 功能詳細資訊 {#feature-details}

此功能使用戶在在程式設計師應用程式中提供了唯一資訊（如電子郵件地址）後，能夠從特定設備（電話和平板電腦）訪問促銷內容。

程式設計師將在驗證和授權API上提供用戶PII上的哈希。 此散列將與設備ID一起用於生成唯一密鑰以標識用戶和設備。

根據設備ID和用戶提供的資訊並遵循以下邏輯，Adobe Primetime驗證將確定用戶是處於新試用中還是處於現有試用中：

* 用戶提供的資訊（例如，電子郵件）上的新哈希，新設備ID =>新試用版
* 現有哈希 — 用戶提供的資訊（例如，電子郵件）、新設備ID =>現有試用版(現有哈希 — 用戶提供的資訊（例如，電子郵件）)
* 用戶提供的資訊（例如，電子郵件）、現有設備ID =>現有試用版（現有設備ID）上的新哈希
* 用戶提供的資訊（例如，電子郵件）、現有設備ID =>現有試用

>[!NOTE]
>用戶提供的資訊的驗證和散列由程式設計師處理，而不是由Adobe處理。

**可以根據以下屬性配置促銷臨時傳遞功能：**

* 用戶提供的資訊密鑰（例如，電子郵件）
* 用戶有權使用的資源數
* TTL — 用戶有權使用配置的資源數的時間範圍

### 用戶元資料 {#user-metadata}

為便於實施程式設計師應用程式，請執行以下操作 **用戶元資料資訊公開** 在「促銷臨時通行證」上，使用相應的密鑰(要激活密鑰，請聯繫tve-support@adobe.com):

* **剩餘資源**:當前用戶有權使用的剩餘資源數
* **used_assets**:當前用戶已使用的資源清單
* **到期日**:當前用戶的到期日

### 如何計算查看時間？ {#compute-viewing-time}

臨時通行證的有效時間與用戶在程式設計師應用程式上查看內容所花費的時間無關。 在通過提升臨時通道進行初始用戶授權請求時，通過將初始當前請求時間添加到由程式設計師指定的TTL（持續時間幀）來計算到期時間。

### 驗證和授權 {#authn-authz}

對於促銷臨時傳遞流，驗證和授權不會與實際MVPD通信， **因此所有授權請求都成功** 只要滿足這些條件：

* 授權令牌對指定的資源有效
* 數 **used_assets** 低於程式設計師設定的限制
* **到期日** 值晚於當前日期。

### 印前檢查行為 {#preflight-beh}

當對促銷臨時通行MVPD發出預檢或預授權請求時，返回的相應預檢響應將包含預檢成功時預檢請求中的整個資源清單。

其背後的邏輯是：「提升臨時通過」授權條件基於時間和資源編號限制，而不是基於特定資源。 更具體地說，只要滿足時間約束並且不超過資源限制，就對被調用的資源進行授權。

### SSO {#sso}

未對「提升臨時通行」實例啟用SSO，該SSO配置為「每個請求者的身份驗證」。 這意味著，當用戶從應用程式A切換到與同一提升臨時通行證整合的其他應用程式B時，用戶將不會自動登錄。

### 註銷 {#logout}

註銷時，設備上的所有令牌都將被刪除。 因此，從促銷臨時通行證切換到常規用戶選擇的MVPD不應依賴此實現。 建議使用 `setSelectedProvider(null)` 以清除應用程式狀態，然後重新啟動驗證流，這樣具有更好的用戶體驗。

### 提升臨時傳遞流程圖 {#promo-tempass-flowdia}

![提升臨時傳遞流程圖](assets/promo-temp-pass-flow.png)

*圖：提升臨時通行流*

## 實施促銷臨時通行證 {#impl-promo-tempass}

促銷臨時通行需要以下客戶端功能：

* **用戶標識符資訊，例如電子郵件地址傳播** （在驗證和授權流中發送用戶的電子郵件地址）。 Adobe Primetime身份驗證需要電子郵件來綁定身份驗證和授權令牌(類似於 `device_ID`)。
* **強制驗證**  — 允許程式設計師在用戶已經過身份驗證時強制執行身份驗證流。 要強制用戶元資料刷新（用戶元資料密鑰），需要此功能 **used_assets** 包含每次啟動應用時可用資源的數量)。 由於用戶可以在多台設備上登錄，因此應用程式啟動期間在設備上出現的用戶元資料不可靠，我們需要更新它以反映該特定用戶的當前狀態（通過電子郵件地址標識）。


>[!IMPORTANT]
>只有在iOS和Android上才能進行強制身份驗證。
>黃金時間驗證沒有內置機制來在X分鐘過後停止免費流。 黃金時段驗證將停止發佈 **授權** 和 **短媒體** 當用戶使用Y空閒資源時，標籤。 一旦促銷臨時通行證過期，程式設計師就應限制訪問。

## 安全 {#security}

>[!IMPORTANT]
>Adobe不儲存任何個人身份資訊(PII)。 因此，程式設計師必須在唯一用戶提供的黃金時間驗證API上設定哈希。

**用戶標識符資訊的散列**

Adobe建議使用 **SHA-2** 家族或特定 **SHA-256**。 **SHA-512** 函式，然後將其發送到Adobe。

比如說， **SHA-256** 超 **&quot;user@domain.com&quot;** 是 **&quot;f7ee5ec7312165148b69fcca1d29075b14b8aef0b5048a332b18b88d09069fb7&quot;**。

## 重置或清除促銷臨時傳遞 {#reset-promo-tempass}

某些業務規則需要定期清除促銷臨時通行證。 為此，Mighine身份驗證為程式設計師提供 *公共* Web API，如下所述：

| `DELETE https://mgmt.auth.adobe.com/reset-tempass/v2/reset` |
|----|
| <ul><li>協定： **htps**</li><li>主機：<ul><li>版本： **mgmt.auth.adobe.com**</li><li>普勒卡爾： **mgmt.prequal.auth.adobe.com**</li></ul></li><li>路徑： **/reset tempass/v2/reset**</li><li>查詢參數： **device_id=all&amp;requestor_id=THE_REQUESTOR_ID&amp;mvpd_id=THE_TEMPASS_MVPD_ID**</li><li>標題：ApiKey: **1232293681726481**</li> <li>響應：<ul><li>成功： **HTTP 204**</li><li>失敗： **HTTP 400** 錯誤的請求， **HTTP 401** 如果未指定ApiKey, **HTTP 403** 如果ApiKey無效</li></ul></li></ul> |

除清除臨時傳遞的要求外，提升臨時傳遞還使用散列在用戶標識符資訊上，發送時為 **泛型資料** 驗證和授權清除。

將發送哈希，而不是整個JSON:

```cURL
$ curl -X DELETE -H "Authorization:Bearer H4j7cF3GtJX81BrsgDa10GwSizVz" "https://mgmt.auth.adobe.com/reset-tempass/v2.1/reset/generic?key=f7ee5ec7312165148b69fcca1d29075b14b8aef0b5048a332b18b88d09069fb7&requestor_id=REF&mvpd_id=FlexibleTempPass"
```

### 支援的客戶端 {#supported-clients}

| Adobe Primetime身份驗證客戶端 | 促銷臨時通行證 | 重置工具 | 支援專用響應代碼/客戶端錯誤 |
|:--------------------------------------:|:---------------------:|:----------:|:-----------------------------------------------:|
| JS訪問啟用程式 | 是 | 是 | 是(從v 3.0.0開始) |
| 本地客戶端iOS | 是 | 是 | 是（從1.10版開始） |
| 本機客戶端Android | 是 | 是 | 是 |
| 無客戶端API | 是 | 是 | 否 |


## 限制 {#limitations}

本節介紹適用於當前實施促銷臨時通行證的限制。

### 無客戶端 {#lim-clientless}

**沒有唯一設備ID的智慧設備**

並非所有智慧設備應用都能提供唯一設備ID。 如果沒有，Adobe Primetime驗證可以使用Adobe註冊代碼服務生成的UUID作為唯一設備ID。 這意味著當用戶註銷時，將刪除驗證和授權令牌。 一旦用戶再次嘗試進行身份驗證，此次用戶將能夠再次授權使用不同的用戶資訊（例如，電子郵件）。 Adobe建議添加一個UI流，該流不允許用戶「欺騙」系統，並添加邏輯以確定它是請求試用的新用戶還是現有試用。

**重置/清除臨時傳遞**

在Xbox360和Xbox One的特定情況下，無客戶端的重置臨時密碼不可用，因為這些平台需要額外的設備ID分析，在「重置臨時密碼」工具中是不可能的。

<!--
>[!RELATEDINFORMATION]
>
>* [Preflight Authorization](/help/authentication/preflight-authz.md)
-->
