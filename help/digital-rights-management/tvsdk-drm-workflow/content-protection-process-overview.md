---
title: 授權取得程式概觀
description: 授權取得程式概觀
copied-description: true
source-git-commit: 02ebc3548a254b2a6554f1ab34afbb3ea5f09bb8
workflow-type: tm+mt
source-wordcount: '339'
ht-degree: 0%

---

# 授權取得程式概觀{#license-acquisition-process-overview}

以下各節將使用ActionScript3 (AS3)程式碼範例說明如何讓應用程式在Primetime DRM的保護下播放內容。 我們會在適當位置呈現行動平台上原生應用程式從此工作流程的微妙差異。 不過，Primetime DRM工作流程在所有平台上都非常類似，因此您對AS3程式碼的理解將可讓您相當直接地將其外推至其他平台。

**授權取得程式：**

1. 取得受保護內容的DRM中繼資料。
1. 檢查授權是否可在本機取得：

   * 如果授權在本機可用，請載入授權並前往步驟6。
   * 如果授權無法在本機取得，請繼續步驟3。

1. 檢查是否需要驗證：

   * 如果需要驗證，請從使用者取得驗證認證，並將它們傳遞給授權伺服器。
   * 如果不需要驗證，請前往步驟6。

1. 如果需要裝置網域註冊，請加入裝置網域。
1. 如果需要驗證且現在已完成，請從授權伺服器下載授權。
1. 播放內容。

如果未發生任何錯誤，且使用者已成功獲得檢視內容的授權，Primetime會派送 `DRMStatusEvent` 物件與應用程式開始播放。 此 `DRMStatusEvent` 物件保有相關的授權資訊，可識別使用者的原則與許可權。 例如， `DRMStatusEvent` 可能會包含內容是否可以離線使用、授權過期時間等資訊。

應用程式可使用授權資訊來通知使用者其原則的狀態。 例如，應用程式可以在狀態列中顯示使用者檢視內容的剩餘天數。 如果允許使用者離線存取，則會快取授權，並將加密內容下載到使用者的電腦。 內容可在授權快取期間所定義的期間記憶體取。 事件中的詳細資料屬性包含 `DRM.voucherObtained`. 應用程式會決定要將內容儲存在本機的何處，以便離線使用。 您也可以使用預先載入授權 `DRMManager` 類別。
